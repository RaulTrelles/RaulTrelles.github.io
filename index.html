<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K9XLGD2PPM"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-K9XLGD2PPM');
    </script>

    <script>
        document.cookie = "key=value; SameSite=None; Secure";
    </script>

    <!-- CONFIGURACI√ìN BOTPRESS M√ÅS SIMPLE Y EFECTIVA -->
    <script>
        // Configuraci√≥n m√≠nima pero efectiva
        window.botpressWebChatInit = {
            botId: "9c0wy3ho",
            hostUrl: "https://cdn.botpress.cloud/webchat/v2.2",
            clientId: "9c0wy3ho",

            // ESTO ES LO M√ÅS IMPORTANTE - Configurar para que inicie ABIERTO
            layout: {
                initialOpen: true,  // Iniciar abierto
                isOpen: true        // Estado abierto
            },

            // Configuraci√≥n del comportamiento
            hideWidget: false,
            showConversationsButton: false,

            // Callback cuando se carga - ESTO ES CLAVE
            onLoad: function (bp) {
                console.log('üîµ Botpress cargado, API disponible');

                // Guardar la instancia para uso global
                window.botpressInstance = bp;

                // Forzar que el chat est√© abierto
                setTimeout(function () {
                    console.log('üîÑ Forzando apertura del chat...');

                    // M√©todo 1: Usar el m√©todo open si existe
                    if (typeof bp.open === 'function') {
                        bp.open();
                        console.log('‚úÖ Chat abierto usando bp.open()');
                    }
                    // M√©todo 2: Usar sendEvent
                    else if (bp.webchat && typeof bp.webchat.sendEvent === 'function') {
                        bp.webchat.sendEvent({ type: 'show' });
                        console.log('‚úÖ Chat abierto usando sendEvent');
                    }
                    // M√©todo 3: Configurar estado directamente
                    else {
                        console.log('‚ö†Ô∏è Usando m√©todo alternativo');
                        try {
                            // Intentar modificar el estado directamente
                            if (bp.config) {
                                bp.config.layout.isOpen = true;
                            }
                        } catch (e) {
                            console.log('Error:', e);
                        }
                    }
                }, 1000); // Esperar 1 segundo para asegurar carga completa
            }
        };
    </script>

    <title>Portafolio Personal</title>
</head>

<body>
    <nav>
        <input type="checkbox" class="checkbox" id="check">
        <h1 class="nav_head">Ra√∫l</h1>
        <ul>
            <li><a href="#home">Inicio</a></li>
            <li><a href="#about">Acerca de</a></li>
            <li><a href="#tecnologias">Tecnolog√≠as</a></li>
            <li><a href="#portafolio">Portafolio</a></li>
            <li><a href="#experimentos">Experimentos</a></li>
            <a href="./paginas/contactame.html"><button class="contact_btn">Contactame</button></a>
        </ul>

        <label for="check" class="checkbtn">
            <i class="fas fa-bars" id="menu-icon"></i>
            <i class="fas fa-times" id="close-icon" style="display: none;"></i>
        </label>
    </nav>

    <section id="home" class="home">
        <img src="./img/ratv.svg" alt="" width="550px" height="450px">
        <div class="description">
            <h1>Hola, te saluda <br><span> Ra√∫l Trelles </span></h1>
            <h2><span>Hagamos que los datos y los sistemas hablen ... </span></h2>
            <P>Un apasionado por la tecnolog√≠a, disfruto implementando soluciones que ayuden a generar valor,
                ahorro y oportunidades en las organizaciones, haciendo uso de la tecnolog√≠a .</P>
            <div class="font">
                <i class="fa-brands fa-instagram icon-disabled"></i>
                <i class="fa-brands fa-facebook icon-disabled"></i>
                <a href="https://www.linkedin.com/in/raultrelles/" target="_blank" rel="noopener noreferrer">
                    <i class="fa-brands fa-linkedin-in"></i>
                </a>
            </div>

            <button id="downloadBtnabout" class="form_btn">Portafolio...</button>

            <script>
                document.getElementById('downloadBtnabout').addEventListener('click', function () {
                    location.href = '#portafolio';
                });
            </script>

        </div>
    </section>
    <section id="about" class="about">
        <div class="about_section">
            <h1>Acerca <span>de mi</span></h1>
            <h2>Soy un Especialista en Desarrollo e Implementaci√≥n de Sistemas y <span>Anal√≠tica de Datos</span></h2>
            <p>Ingeniero de Sistemas y C√≥mputo, MBA con √©nfasis en Business Intelligence y Big Data, Certificado en
                Scrum Master e ITIL y especialista en Gesti√≥n de Proyectos TI, con m√°s de 10 a√±os de experiencia en
                sectores como Servicios, Legal, Gobierno, Industria, Log√≠stico, Alimentario, Aduanero, Comercio
                Exterior, Energ√≠a, he liderado proyectos de desarrollo, implementaciones de sistemas CRM y ERP.
                Desarrollador Full Stack y Cient√≠fico de Datos con experiencia en desarrollo web y m√≥vil, an√°lisis de
                datos e inteligencia de negocios. Apasionado por crear soluciones que generen valor, optimizaci√≥n y
                oportunidades en las organizaciones a trav√©s de la tecnolog√≠a...</p> <br>

            <button id="downloadBtn" class="about_btn">Download CV</button>

            <script>
                document.getElementById('downloadBtn').addEventListener('click', function () {
                    window.open('https://drive.google.com/file/d/16kCg0tOBKmcj3Zp8NE6DafUZjQYY1A28/view?usp=sharing', '_blank');
                });
            </script>

        </div>
        <div class="about_photo">
            <img src="./img/ratv.svg" alt="" width="400" height="300">
        </div>
    </section>
    <section id="tecnologias" class="tecnologias">
        <h1 class="tecnologias_section">Algunas tecnolog√≠as con las que <span>Trabajo</span></h1>
        <div class="card_tec">
            <div class="tecnologias_card">
                <img src="./img/erp2.png" alt="" width="200px" height="150px">
                <h3>Gesti√≥n y Procesos</h3>
            </div>
            <div class="tecnologias_card">
                <img src="./img/analiticadatos.png" alt="" width="200px" height="150px">
                <h3>Anal√≠tica de Datos</h3>
            </div>
            <div class="tecnologias_card">
                <img src="./img/uiux.png" alt="" width="200px" height="150px">
                <h3>Dise√±o Ux/Ui</h3>
            </div>
            <div class="tecnologias_card">
                <img src="./img/backend.png" alt="" width="200px" height="150px">
                <h3>Backend</h3>
            </div>
            <div class="tecnologias_card">
                <img src="./img/developer.png" alt="" width="200px" height="150px">
                <h3>FrontEnd</h3>
            </div>

        </div>

    </section>
    <section id="portafolio" class="portafolio">
        <h1 class="port_section"><span>Portafolio</span> Reciente</h1>
        <div class="projects">
            <a href="./paginas/PortalInteligenciaNegocios.html">
                <div class="port_card">
                    <img src="./img/Power BI.png" alt="" width="400px" height="350px">
                    <div class="content">
                        <h1>Inteligencia de Negocios</h1>
                        <p>Una herramienta importante en estos timpos en las organizaciones, el manejar indicadores y
                            dashboard nos ayudan a tener una visi√≥n r√°pidamente de mi organizaci√≥n, conoce algunos de
                            mis proyectos...</p>
                    </div>
                </div>
            </a>

            <a href="./paginas/PortalERP.html">
                <div class="port_card">
                    <img src="./img/erp.png" alt="" width="400px" height="350px">
                    <div class="content">
                        <h1>Implementador ERP's</h1>
                        <p>Desarrollo una metodolog√≠a que asegura que tu implementaci√≥n tenga el √©xito deseado,
                            brindando un escenario en donde la alta gerencia obtiene los indicadores deseados y los
                            usuarios est√°n felices...</p>
                    </div>
                </div>
            </a>

            <a href="./paginas/PortalFullStack.html">
                <div class="port_card">
                    <img src="./img/developer.png" alt="" width="400px" height="350px">
                    <div class="content">
                        <h1>Desarrollo e Implementaci√≥n <br>
                            de Sistemas - Full Stack Developer</h1>
                        <p>El conocer tecnolog√≠as de BackEnd y FrontEnd me permiten afrontar un proyecto integralmente
                            complementando con el dise√±o, te invito a conocer mis √∫ltimos proyectos...</p>
                    </div>
                </div>
            </a>


        </div>

    </section>
    <section id="experimentos" class="Experimentos">
        <h1 class="exper_section"><span>Algunos </span> Experimentos</h1>
        <div class="exper">

            <div class="exper_card" id="1">
                <a href="https://codepen.io/CreativeCoder111/pen/XWyjBab" target="_blank" rel="noopener noreferrer">
                    <img src="./img/experimentos/experimento1.png" alt="" width="400px" height="350px">
                    <div class="content">
                        <h1>Carrucel CCS3 y JS</h1>
                    </div>
                </a>
            </div>

            <div class="exper_card" id="2">
                <a href="https://www.figma.com/design/VqSfwfs8t9WPu819F6OFzI/Untitled?node-id=0-1&t=DVwkHo8mPk43pt0D-1"
                    target="_blank" rel="noopener noreferrer">
                    <img src="./img/experimentos/experimento5.png" alt="" width="400px" height="350px">
                    <div class="content">
                        <h1>Dise√±o Figma de Portal</h1>
                        <h1>Portafolio Personal</h1>

                    </div>
                </a>
            </div>

        </div>

    </section>

    <div class="footer">
        <p><i class="fa-solid fa-copyright"></i>Ra√∫l Trelles. || All Right Reserved... </p>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-body">
                <!-- El contenido del modal ir√° aqu√≠, cambiar√° din√°micamente -->
            </div>
        </div>
    </div>

    <!-- Bot√≥n para minimizar/maximizar chat -->
    <button class="chat-minimize-btn" id="chatMinimizeBtn" title="Cerrar/Minimizar chat">
        <i class="fas fa-times"></i>
    </button>

    <script src="./js/script.js"></script>

    <!-- Cargar Botpress -->
    <script src="https://cdn.botpress.cloud/webchat/v2.2/inject.js"></script>
    <script src="https://files.bpcontent.cloud/2025/01/14/04/20250114041029-9C0WY3HO.js"></script>

    <!-- CONTROL SIMPLE DEL CHATBOT -->
    <script type="text/javascript">
        // Inyectar estilos para permitir interacci√≥n con el chat
        const chatStyle = document.createElement('style');
        chatStyle.textContent = `
            iframe.bpWebchat,
            iframe[class*="bp"],
            div#bp-widget,
            div[class*="bp-webchat"] {
                pointer-events: auto !important;
                cursor: auto !important;
            }
        `;
        document.head.appendChild(chatStyle);

        let chatClosed = false;
        let chatOpened = false;

        function getBotpressWidget() {
            const selectors = [
                'iframe.bpWebchat',
                'iframe[class*="bp"]',
                'div#bp-widget',
                'div[class*="bp-webchat"]'
            ];
            for (const sel of selectors) {
                const el = document.querySelector(sel);
                if (el) return el;
            }
            return null;
        }

        function toggleChatVisibility() {
            const widget = getBotpressWidget();
            if (!widget) {
                console.log('‚ùå Widget no encontrado');
                return;
            }

            if (chatClosed) {
                // Mostrar chat
                widget.style.display = 'block';
                widget.style.visibility = 'visible';
                widget.style.opacity = '1';
                chatClosed = false;
                document.getElementById('chatMinimizeBtn').innerHTML = '<i class="fas fa-times"></i>';
                document.getElementById('chatMinimizeBtn').title = 'Cerrar/Minimizar chat';
                console.log('üëÅÔ∏è Chat mostrado');
            } else {
                // Ocultar chat
                widget.style.display = 'none';
                widget.style.visibility = 'hidden';
                widget.style.opacity = '0';
                chatClosed = true;
                document.getElementById('chatMinimizeBtn').innerHTML = '<i class="fas fa-chevron-up"></i>';
                document.getElementById('chatMinimizeBtn').title = 'Abrir chat';
                console.log('üí§ Chat ocultado');
            }
        }

        function openChatAuto() {
            const widget = getBotpressWidget();
            if (widget && !chatOpened) {
                widget.style.display = 'block';
                widget.style.visibility = 'visible';
                widget.style.opacity = '1';
                chatClosed = false;
                chatOpened = true;
                document.getElementById('chatMinimizeBtn').innerHTML = '<i class="fas fa-times"></i>';
                console.log('üéâ Chat abierto autom√°ticamente');
            }
        }

        // Agregar listener al bot√≥n
        function setupMinimizeButton() {
            const btn = document.getElementById('chatMinimizeBtn');
            if (btn) {
                btn.addEventListener('click', toggleChatVisibility);
                console.log('‚úÖ Bot√≥n minimizar configurado');
            }
        }

        // Mostrar bot√≥n cuando aparezca el widget y abrir despu√©s de 15 segundos
        function monitorWidgetAppearance() {
            const observer = new MutationObserver(() => {
                const widget = getBotpressWidget();
                const btn = document.getElementById('chatMinimizeBtn');
                if (widget && btn) {
                    if (!btn.classList.contains('show')) {
                        btn.classList.add('show');
                        console.log('‚úÖ Bot√≥n minimizar mostrado (widget detectado)');
                        // Abrir el chat autom√°ticamente despu√©s de 15 segundos
                        setTimeout(openChatAuto, 5000);
                        observer.disconnect(); // Dejar de observar
                    }
                }
            });
            observer.observe(document.body, { childList: true, subtree: true });
        }

        // Inicializar
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                setupMinimizeButton();
                monitorWidgetAppearance();
            });
        } else {
            setupMinimizeButton();
            monitorWidgetAppearance();
        }

        // Exponer para debugging
        window.toggleChat = toggleChatVisibility;
        window.debugWidget = getBotpressWidget;
        window.openChatNow = openChatAuto;
        console.log('üîß Comandos: toggleChat(), debugWidget(), openChatNow()');

        // Manejar el men√∫ responsive
        document.addEventListener('DOMContentLoaded', () => {
            const checkboxMenu = document.getElementById('check');
            if (checkboxMenu) {
                checkboxMenu.addEventListener('change', function () {
                    const menuIcon = document.getElementById('menu-icon');
                    const closeIcon = document.getElementById('close-icon');
                    if (this.checked) {
                        menuIcon.style.display = 'none';
                        closeIcon.style.display = 'inline';
                    } else {
                        menuIcon.style.display = 'inline';
                        closeIcon.style.display = 'none';
                    }
                });
            }
        });
    </script>

</body>

</html>